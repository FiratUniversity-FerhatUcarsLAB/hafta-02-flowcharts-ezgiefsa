

digraph E_Ticaret_Sistemi {
    rankdir=TB;
    node [fontname="Arial"];

    basla [label="BAŞLA", shape=oval, style=filled, fillcolor=lightgreen];

    // 1. Kullanıcı Girişi
    g1 [label="Giriş mi Kayıt mı? (1=Giriş, 2=Kayıt)", shape=diamond];
    g2 [label="E-posta ve şifre al", shape=parallelogram];
    g3 [label="Kullanıcı doğrula", shape=box];
    g4 [label="Giriş başarılı?", shape=diamond];
    g5 [label="Kullanıcı kaydı oluştur", shape=box];
    g6 [label="Kayıt başarılı, tekrar giriş", shape=parallelogram];

    // 2. Ürün Seçimi
    u1 [label="Ürün kataloğu göster", shape=box];
    u2 [label="Ürün seç ve miktar gir", shape=parallelogram];
    u3 [label="Stok yeterli mi?", shape=diamond];
    u4 [label="Ürünü sepete ekle", shape=box];
    u5 [label="Yetersiz stok uyarısı", shape=parallelogram];
    u6 [label="Başka ürün ekle?", shape=diamond];

    // 3. Sepet Yönetimi
    s1 [label="Sepeti göster", shape=box];
    s2 [label="İşlem seç (miktar değiştir / sil / devam)", shape=parallelogram];
    s3 [label="İşlem türü", shape=diamond];
    s4 [label="Miktar değiştir", shape=box];
    s5 [label="Ürün sil", shape=box];
    s6 [label="Sepeti güncelle", shape=box];
    s7 [label="Stok yeterli mi?", shape=diamond];

    // 4. İndirim Kodu
    i1 [label="İndirim kodu var mı?", shape=diamond];
    i2 [label="Kod al", shape=parallelogram];
    i3 [label="Kod geçerli mi?", shape=diamond];
    i4 [label="İndirim uygula", shape=box];
    i5 [label="Geçersiz kod uyarısı", shape=parallelogram];

    // 5. Kargo
    k1 [label="Adres al", shape=parallelogram];
    k2 [label="Kargo ücreti hesapla", shape=box];
    k3 [label="Toplam > 1000 TL mi?", shape=diamond];
    k4 [label="Kargo ücretsiz yap", shape=box];
    k5 [label="Toplam tutarı göster", shape=parallelogram];

    // 6. Ödeme
    o1 [label="Ödeme tipi seç (1=Kart, 2=Kapıda)", shape=diamond];
    o2 [label="Kart bilgilerini al", shape=parallelogram];
    o3 [label="Ödeme onayı", shape=box];
    o4 [label="Ödeme başarılı mı?", shape=diamond];
    o5 [label="Stok güncelle, sipariş oluştur", shape=box];
    o6 [label="Kapıda ödeme: sipariş oluştur", shape=box];
    o7 [label="Ödeme başarısız uyarısı", shape=parallelogram];

    // 7. Sipariş Sonu
    son [label="Sipariş tamamlandı\nDurum: Hazırlanıyor", shape=oval, style=filled, fillcolor=lightblue];

    // --- Bağlantılar ---
    basla -> g1;

    g1 -> g2 [label="1 (Giriş)"];
    g1 -> g5 [label="2 (Kayıt)"];

    g2 -> g3;
    g3 -> g4;
    g4 -> u1 [label="EVET"];
    g4 -> basla [label="HAYIR"];

    g5 -> g6;
    g6 -> basla;

    u1 -> u2;
    u2 -> u3;
    u3 -> u4 [label="EVET"];
    u3 -> u5 [label="HAYIR"];
    u4 -> u6;
    u5 -> u6;
    u6 -> u1 [label="EVET"];
    u6 -> s1 [label="HAYIR"];

    s1 -> s2;
    s2 -> s3;
    s3 -> s4 [label="Miktar"];
    s3 -> s5 [label="Sil"];
    s3 -> i1 [label="Devam"];

    s4 -> s7;
    s7 -> s6 [label="EVET"];
    s7 -> s1 [label="HAYIR"];
    s5 -> s1;
    s6 -> s1;

    i1 -> i2 [label="EVET"];
    i1 -> k1 [label="HAYIR"];
    i2 -> i3;
    i3 -> i4 [label="EVET"];
    i3 -> i5 [label="HAYIR"];
    i4 -> k1;
    i5 -> k1;

    k1 -> k2;
    k2 -> k3;
    k3 -> k4 [label="EVET"];
    k3 -> k5 [label="HAYIR"];
    k4 -> k5;
    k5 -> o1;

    o1 -> o2 [label="1 (Kart)"];
    o1 -> o6 [label="2 (Kapıda)"];
    o2 -> o3;
    o3 -> o4;
    o4 -> o5 [label="EVET"];
    o4 -> o7 [label="HAYIR"];
    o7 -> o1;
    o5 -> son;
    o6 -> son;
}
